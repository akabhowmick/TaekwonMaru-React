"use strict";var e=require("react/jsx-runtime"),r=require("react-intersection-observer"),t=require("react"),s=require("transitions-kit");function o(e,r){var t={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(t[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)r.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(t[s[o]]=e[s[o]])}return t}"function"==typeof SuppressedError&&SuppressedError;const n=t.forwardRef(((r,t)=>{var{style:s}=r,n=o(r,["style"]);return e.jsx("div",Object.assign({ref:t},n,{className:`AsyncImage-root ${n.className}`.trim(),style:Object.assign(Object.assign({},s),{display:"flex",overflow:"hidden",backgroundRepeat:"no-repeat",boxSizing:"border-box",backgroundSize:"cover",position:"relative"})}))})),i={top:0,left:0,width:"100%",height:"100%",position:"absolute",boxSizing:"border-box"},a=e.jsx("div",{className:"AsyncImage-loader",style:{backgroundColor:"#eee"}}),c=e.jsx("div",{className:"Asyncimage-error",style:{backgroundColor:"#eee"},children:e.jsx("svg",{fill:"#00000061",viewBox:"0 0 24 24",style:{position:"absolute",inset:0,width:"50%",height:"50%",margin:"auto"},children:e.jsx("path",{d:"M21 5c0-1.1-.9-2-2-2H5.83L21 18.17V5zM2.81 2.81 1.39 4.22 3 5.83V19c0 1.1.9 2 2 2h13.17l1.61 1.61 1.41-1.41L2.81 2.81zM6 17l3-4 2.25 3 .82-1.1 2.1 2.1H6z"})})});var l;!function(e){e[e.LOADING=0]="LOADING",e[e.LOADED=1]="LOADED",e[e.FAILED=2]="FAILED"}(l||(l={}));const u=({sources:r=[]})=>r.length?e.jsx(e.Fragment,{children:r.map((r=>{return e.jsx("source",Object.assign({},r),null!==(s=(t=r).src)&&void 0!==s?s:t.srcSet);var t,s}))}):null,d=r=>{var{error:n,loader:a,onLoad:c,onError:d,objectFit:j="cover",Transition:g=s.Fade,sources:b=[],inView:p}=r,m=o(r,["error","loader","onLoad","onError","objectFit","Transition","sources","inView"]);const[O,x]=t.useState(l.LOADING);return e.jsxs(e.Fragment,{children:[e.jsx(s.Fade,{appear:!1,in:O===l.LOADING,timeout:1e3,unmountOnExit:!0,children:t.cloneElement(a,{style:Object.assign(Object.assign({},a.props.style),i)})}),p&&e.jsx(g,{in:O===l.LOADED,timeout:1e3,children:e.jsxs("picture",{style:i,children:[e.jsx(u,{sources:b}),e.jsx("img",Object.assign({},m,{className:"AsyncImage-image",style:Object.assign({objectFit:j},i),onLoad:e=>{x(l.LOADED),null==c||c(e)},onError:e=>{x(l.FAILED),null==d||d(e)}}))]})}),e.jsx(s.Fade,{in:O===l.FAILED,timeout:1e3,mountOnEnter:!0,unmountOnExit:!0,children:t.cloneElement(n,{style:Object.assign(Object.assign({},n.props.style),i)})})]})};exports.AsyncImage=t=>{var{loader:s=a,error:i=c,rootMargin:l="600px 0px",objectFit:u="cover",style:j={},className:g=""}=t,b=o(t,["loader","error","rootMargin","objectFit","style","className"]);return e.jsx(r.InView,{rootMargin:l,triggerOnce:!0,children:({ref:r,inView:t})=>{var o;return e.jsx(n,{ref:r,className:g,style:j,children:e.jsx(d,Object.assign({error:i,loader:s,objectFit:null!==(o=j.objectFit)&&void 0!==o?o:u,inView:t},b))})}})};
