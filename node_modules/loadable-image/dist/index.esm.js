import{jsx as e,Fragment as r,jsxs as t}from"react/jsx-runtime";import{InView as o}from"react-intersection-observer";import{forwardRef as n,useState as i,cloneElement as s}from"react";import{Fade as a}from"transitions-kit";function c(e,r){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&r.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)r.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(t[o[n]]=e[o[n]])}return t}"function"==typeof SuppressedError&&SuppressedError;const l=n(((r,t)=>{var{style:o}=r,n=c(r,["style"]);return e("div",Object.assign({ref:t},n,{className:`AsyncImage-root ${n.className}`.trim(),style:Object.assign(Object.assign({},o),{display:"flex",overflow:"hidden",backgroundRepeat:"no-repeat",boxSizing:"border-box",backgroundSize:"cover",position:"relative"})}))})),u={top:0,left:0,width:"100%",height:"100%",position:"absolute",boxSizing:"border-box"},d=e("div",{className:"AsyncImage-loader",style:{backgroundColor:"#eee"}}),b=e("div",{className:"Asyncimage-error",style:{backgroundColor:"#eee"},children:e("svg",{fill:"#00000061",viewBox:"0 0 24 24",style:{position:"absolute",inset:0,width:"50%",height:"50%",margin:"auto"},children:e("path",{d:"M21 5c0-1.1-.9-2-2-2H5.83L21 18.17V5zM2.81 2.81 1.39 4.22 3 5.83V19c0 1.1.9 2 2 2h13.17l1.61 1.61 1.41-1.41L2.81 2.81zM6 17l3-4 2.25 3 .82-1.1 2.1 2.1H6z"})})});var p;!function(e){e[e.LOADING=0]="LOADING",e[e.LOADED=1]="LOADED",e[e.FAILED=2]="FAILED"}(p||(p={}));const g=({sources:t=[]})=>t.length?e(r,{children:t.map((r=>{return e("source",Object.assign({},r),null!==(o=(t=r).src)&&void 0!==o?o:t.srcSet);var t,o}))}):null,m=o=>{var{error:n,loader:l,onLoad:d,onError:b,objectFit:m="cover",Transition:O=a,sources:y=[],inView:j}=o,f=c(o,["error","loader","onLoad","onError","objectFit","Transition","sources","inView"]);const[h,v]=i(p.LOADING);return t(r,{children:[e(a,{appear:!1,in:h===p.LOADING,timeout:1e3,unmountOnExit:!0,children:s(l,{style:Object.assign(Object.assign({},l.props.style),u)})}),j&&e(O,{in:h===p.LOADED,timeout:1e3,children:t("picture",{style:u,children:[e(g,{sources:y}),e("img",Object.assign({},f,{className:"AsyncImage-image",style:Object.assign({objectFit:m},u),onLoad:e=>{v(p.LOADED),null==d||d(e)},onError:e=>{v(p.FAILED),null==b||b(e)}}))]})}),e(a,{in:h===p.FAILED,timeout:1e3,mountOnEnter:!0,unmountOnExit:!0,children:s(n,{style:Object.assign(Object.assign({},n.props.style),u)})})]})},O=r=>{var{loader:t=d,error:n=b,rootMargin:i="600px 0px",objectFit:s="cover",style:a={},className:u=""}=r,p=c(r,["loader","error","rootMargin","objectFit","style","className"]);return e(o,{rootMargin:i,triggerOnce:!0,children:({ref:r,inView:o})=>{var i;return e(l,{ref:r,className:u,style:a,children:e(m,Object.assign({error:n,loader:t,objectFit:null!==(i=a.objectFit)&&void 0!==i?i:s,inView:o},p))})}})};export{O as AsyncImage};
